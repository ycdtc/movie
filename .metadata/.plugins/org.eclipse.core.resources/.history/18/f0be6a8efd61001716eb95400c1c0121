<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="javascript/base.js"></script>
<link rel="stylesheet" href="stylesheet/base.css" />
<title>Insert title here</title>
</head>
<body>
<button id="boxoffice">box office</button>
<button id="seecomment">see comment</button>
<button id="schedulemovie">schedule movie</button>
<div id="res"></div>
<script type="text/javascript">
var path = "D:\data\roominfo.txt";
$("#boxoffice").click(function(){

});

$("#seecomment").click(function(){
	
});

$("#schedulemovie").click(function(){
	$("#res").empty();
	var brands = dbGetValue(path, "brand");
	brands = ["123","456"];
	for(var i=0;i<brands.length;i++)
		console.log(brands[i]);
	$("#res").append($("<select id='select'></select>"));
	$("#select").append($("<option selected='selected' disabled='disabled'>" +"</option>"));
	for(var i=0;i<brands.length;i++){
		$("#select").append($("<option>" + brands[i] +"</option>"));
	}
	$("#res").append($("<div id='table'></div>"));
	$("#select").change(function(){
		$("#table").empty();
		var brand = $("#select option:selected").html();
		var rooms = dbGetValue(path, "room");
		for(var i=0;i<rooms.length;i++){
			var res = dbSearch(path, {"brand":brand,"room",rooms[i]});
			res.sort(function(o1,o2){
				return o1.time < o2.time;
			});
			$("#table").append($("<tr><td style = 'text-align:\"center\""' rowspan='" + res.length +"'>" + rooms[i] +"</td><td>time</td><td>movie</td><td>price</td></tr>"));
			for(var i=0;i<res.length;i++){
				$("#table").append($("<tr><td>"+ res.time +"</td>"+ res.movie +"<td>"+ res.price +"</td></tr>"));
			}
			
		}
		
	})
	
	//add();
});

</script>
</body>
</html>